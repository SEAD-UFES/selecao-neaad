
(function(a){a.fn.priceFormat=function(b){var c={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:false,centsLimit:2,clearPrefix:false,clearSufix:false,allowNegative:false,insertPlusSign:false,clearOnEmpty:false};var b=a.extend(c,b);return this.each(function(){var o=a(this);var s="";var z=/[0-9]/;if(o.is("input")){s=o.val()}else{s=o.html()}var t=b.prefix;var f=b.suffix;var r=b.centsSeparator;var d=b.thousandsSeparator;var y=b.limit;var w=b.centsLimit;var e=b.clearPrefix;var n=b.clearSuffix;var m=b.allowNegative;var k=b.insertPlusSign;var u=b.clearOnEmpty;if(k){m=true}function q(C){if(o.is("input")){o.val(C)}else{o.html(C)}}function A(){if(o.is("input")){s=o.val()}else{s=o.html()}return s}function g(E){var D="";for(var C=0;C<(E.length);C++){char_=E.charAt(C);if(D.length==0&&char_==0){char_=false}if(char_&&char_.match(z)){if(y){if(D.length<y){D=D+char_}}else{D=D+char_}}}return D}function B(C){while(C.length<(w+1)){C="0"+C}return C}function i(H,J){if(!J&&(H===""||H==i("0",true))&&u){return""}var F=B(g(H));var G="";var I=0;if(w==0){r="";C=""}var C=F.substr(F.length-w,w);var E=F.substr(0,F.length-w);F=(w==0)?E:E+r+C;if(d||a.trim(d)!=""){for(var D=E.length;D>0;D--){char_=E.substr(D-1,1);I++;if(I%3==0){char_=d+char_}G=char_+G}if(G.substr(0,1)==d){G=G.substring(1,G.length)}F=(w==0)?G:G+r+C}if(m&&(E!=0||C!=0)){if(H.indexOf("-")!=-1&&H.indexOf("+")<H.indexOf("-")){F="-"+F}else{if(!k){F=""+F}else{F="+"+F}}}if(t){F=t+F}if(f){F=F+f}return F}function p(G){var D=(G.keyCode?G.keyCode:G.which);var F=String.fromCharCode(D);var C=false;var H=s;var E=i(H+F);if((D>=48&&D<=57)||(D>=96&&D<=105)){C=true}if(D==8){C=true}if(D==9){C=true}if(D==13){C=true}if(D==46){C=true}if(D==37){C=true}if(D==39){C=true}if(m&&(D==189||D==109||D==173)){C=true}if(k&&(D==187||D==107||D==61)){C=true}if(!C){G.preventDefault();G.stopPropagation();if(H!=E){q(E)}}}function l(){var D=A();var C=i(D);if(D!=C){q(C)}if(parseFloat(D)==0&&u){q("")}}function x(){o.val(t+A())}function j(){o.val(A()+f)}function v(){if(a.trim(t)!=""&&e){var C=A().split(t);q(C[1])}}function h(){if(a.trim(f)!=""&&n){var C=A().split(f);q(C[0])}}o.bind("keydown.price_format",p);o.bind("keyup.price_format",l);o.bind("focusout.price_format",l);if(e){o.bind("focusout.price_format",function(){v()});o.bind("focusin.price_format",function(){x()})}if(n){o.bind("focusout.price_format",function(){h()});o.bind("focusin.price_format",function(){j()})}if(A().length>0){l();v();h()}})};a.fn.unpriceFormat=function(){return a(this).unbind(".price_format")};a.fn.unmask=function(){var d;var b="";if(a(this).is("input")){d=a(this).val()}else{d=a(this).html()}for(var c in d){if(!isNaN(d[c])||d[c]=="-"){b+=d[c]}}return b}})(jQuery);